buildscript {

    dependencies {
        repositories {
            mavenCentral()
            mavenLocal()
            maven {
                url "https://plugins.gradle.org/m2/"
            }
        }

        classpath "ch.leadrian.samp.kamp:kamp-gradle-plugins:$kampGradlePluginsVersion"
    }
}

apply plugin: 'kamp-textkeygen'
apply plugin: 'kamp-serverstarter'

dependencies {

    compile(
            project(':kamp-core'),
            'org.slf4j:slf4j-simple:1.7.25',
    )

}

def generatedSrcJavaDir = "${buildDir}/generated-src/main/java"

sourceSets {
    main {
        java {
            srcDir generatedSrcJavaDir
        }
    }
}

textKeyGenerator {

    outputDirectory = generatedSrcJavaDir
    packageNames.add("ch.leadrian.samp.kamp.examples.lvdm")
    resourcesDirectory = projectDir.absolutePath + "/src/main/resources"
}

serverStarter {

    gameModeClassName = "ch.leadrian.samp.kamp.examples.lvdm.LvdmGameMode"
    kampPluginBinaryPath = project(":kamp-plugin").projectDir.toString() + "/src/main/cpp/sampgdk/build/plugins/kamp/Release/kamp.dll"
    rconPassword = "test1234"
}

compileKotlin.dependsOn generateTextKeys
compileJava.dependsOn generateTextKeys

configureServer.dependsOn build
